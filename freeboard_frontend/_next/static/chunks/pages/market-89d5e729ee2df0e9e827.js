(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{39074:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return ce}});var r=t(85893),i=t(59999),o=t(46829),s=t(11163),u=t(67294),a=t(88825),c=t(27261),l=t(42731);function d(){var n=(0,c.Z)(["\n  margin-bottom: 5px;\n"]);return d=function(){return n},n}function p(){var n=(0,c.Z)([""]);return p=function(){return n},n}function f(){var n=(0,c.Z)([""]);return f=function(){return n},n}function h(){var n=(0,c.Z)(["\n  width: 60px;\n  height: 60px;\n  border-radius: 16px;\n"]);return h=function(){return n},n}function v(){var n=(0,c.Z)([""]);return v=function(){return n},n}function x(){var n=(0,c.Z)([""]);return x=function(){return n},n}function g(){var n=(0,c.Z)(["\n  display: flex;\n  margin-top: 15px;\n"]);return g=function(){return n},n}function m(){var n=(0,c.Z)(["\n  display: flex;\n  width: 150px;\n  height: 160px;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 16px;\n  box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  margin-top: 15px;\n"]);return m=function(){return n},n}function Z(){var n=(0,c.Z)(["\n  width: 100%;\n  font-size: 20px;\n  text-align: center;\n"]);return Z=function(){return n},n}function w(){var n=(0,c.Z)(["\n  width: 150px;\n  height: 100%;\n  margin-top: 150px;\n  padding-bottom: 100px;\n  position: sticky;\n  top: 50px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return w=function(){return n},n}function b(){var n=(0,c.Z)(["\n  width: 124px;\n  height: 52px;\n"]);return b=function(){return n},n}function y(){var n=(0,c.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  padding-top: 30px;\n"]);return y=function(){return n},n}function j(){var n=(0,c.Z)(["\n  font-size: 24px;\n"]);return j=function(){return n},n}function k(){var n=(0,c.Z)([""]);return k=function(){return n},n}function L(){var n=(0,c.Z)(["\n  height: 20px;\n  width: 20px;\n  background-color: gray;\n"]);return L=function(){return n},n}function C(){var n=(0,c.Z)(["\n  height: 20px;\n  width: 20px;\n  background-color: gray;\n"]);return C=function(){return n},n}function S(){var n=(0,c.Z)([""]);return S=function(){return n},n}function P(){var n=(0,c.Z)(["\n  padding-top: 20px;\n  width: 250px;\n  display: flex;\n"]);return P=function(){return n},n}function M(){var n=(0,c.Z)(["\n  font-size: 16px;\n"]);return M=function(){return n},n}function _(){var n=(0,c.Z)(["\n  font-size: 16px;\n"]);return _=function(){return n},n}function O(){var n=(0,c.Z)(["\n  font-size: 24px;\n"]);return O=function(){return n},n}function E(){var n=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return E=function(){return n},n}function T(){var n=(0,c.Z)(["\n  width: 85%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 20px;\n  box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  border-radius: 16px;\n  :active {\n    position: relative;\n    top: 2px;\n  }\n"]);return T=function(){return n},n}function U(){var n=(0,c.Z)(["\n  height: 160px;\n  width: 160px;\n  border-radius: 16px;\n  box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  :active {\n    position: relative;\n    top: 2px;\n  }\n"]);return U=function(){return n},n}function z(){var n=(0,c.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  height: 180px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return z=function(){return n},n}function N(){var n=(0,c.Z)(["\n  height: 40px;\n  width: 100px;\n  border-radius: 16px;\n  background-color: #fbdf14;\n  margin-right: 20px;\n"]);return N=function(){return n},n}function R(){var n=(0,c.Z)(["\n  border: black 1px solid;\n  font-weight: bold;\n  border-radius: 16px;\n  height: 40px;\n  width: 200px;\n  text-align: center;\n  line-height: 40px;\n  background-color: #fbdf14;\n"]);return R=function(){return n},n}function W(){var n=(0,c.Z)(["\n  width: 400px;\n  height: 40px;\n  border-radius: 16px;\n  text-align: center;\n  font-weight: bold;\n  background-color: #fbdf14;\n"]);return W=function(){return n},n}function H(){var n=(0,c.Z)(["\n  width: 70%;\n  height: 40px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return H=function(){return n},n}function I(){var n=(0,c.Z)(["\n  font-size: 18px;\n  padding-left: 18px;\n"]);return I=function(){return n},n}function B(){var n=(0,c.Z)(["\n  font-size: 18px;\n"]);return B=function(){return n},n}function D(){var n=(0,c.Z)(["\n  display: flex;\n  flex-direction: row;\n  width: 30%;\n"]);return D=function(){return n},n}function $(){var n=(0,c.Z)(["\n  width: 100%;\n  height: 80px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-around;\n"]);return $=function(){return n},n}function q(){var n=(0,c.Z)(["\n  min-width: 100%;\n  height: 1000px;\n  padding-top: 40px;\n  overflow: hidden;\n"]);return q=function(){return n},n}function A(){var n=(0,c.Z)(["\n  font-size: 16px;\n"]);return A=function(){return n},n}function J(){var n=(0,c.Z)(["\n  font-size: 18px;\n"]);return J=function(){return n},n}function Q(){var n=(0,c.Z)(["\n  height: 20px;\n  width: 20px;\n"]);return Q=function(){return n},n}function Y(){var n=(0,c.Z)(["\n  font-size: 12px;\n"]);return Y=function(){return n},n}function X(){var n=(0,c.Z)(["\n  font-size: 18px;\n"]);return X=function(){return n},n}function F(){var n=(0,c.Z)(["\n  width: 30%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n"]);return F=function(){return n},n}function G(){var n=(0,c.Z)(["\n  width: 70%;\n  display: flex;\n  flex-direction: column;\n"]);return G=function(){return n},n}function K(){var n=(0,c.Z)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  padding: 10px 10px;\n"]);return K=function(){return n},n}function V(){var n=(0,c.Z)(["\n  width: 280px;\n  height: 220px;\n  border: solid 1px black;\n  border-radius: 16px;\n"]);return V=function(){return n},n}function nn(){var n=(0,c.Z)(["\n  width: 280px;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  border-radius: 16px;\n  :active {\n    position: relative;\n    top: 2px;\n  }\n"]);return nn=function(){return n},n}function en(){var n=(0,c.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  min-width: 100%;\n"]);return en=function(){return n},n}function tn(){var n=(0,c.Z)(["\n  width: 100%;\n  font-size: 36px;\n  font-weight: bold;\n  text-align: center;\n  min-width: 80%;\n  padding: 50px 50px;\n"]);return tn=function(){return n},n}function rn(){var n=(0,c.Z)(["\n  width: 1200px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-right: 50px;\n"]);return rn=function(){return n},n}function on(){var n=(0,c.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  padding: 50px;\n"]);return on=function(){return n},n}var sn=l.Z.div(on()),un=l.Z.div(rn()),an=l.Z.div(tn()),cn=l.Z.div(en()),ln=l.Z.div(nn()),dn=l.Z.img(V()),pn=l.Z.div(K()),fn=l.Z.div(G()),hn=l.Z.div(F()),vn=l.Z.div(X()),xn=l.Z.div(Y()),gn=l.Z.img(Q()),mn=l.Z.div(J()),Zn=l.Z.div(A()),wn=l.Z.div(q()),bn=l.Z.div($()),yn=l.Z.div(D()),jn=l.Z.div(B()),kn=l.Z.div(I()),Ln=l.Z.div(H()),Cn=l.Z.input(W()),Sn=l.Z.div(R()),Pn=l.Z.button(N()),Mn=l.Z.div(z()),_n=l.Z.img(U()),On=l.Z.div(T()),En=l.Z.div(E()),Tn=l.Z.div(O()),Un=l.Z.div(_()),zn=l.Z.div(M()),Nn=l.Z.div(P()),Rn=l.Z.span(S()),Wn=l.Z.img(C()),Hn=l.Z.img(L()),In=l.Z.span(k()),Bn=l.Z.div(j()),Dn=l.Z.div(y()),$n=l.Z.button(b()),qn=l.Z.div(w()),An=l.Z.div(Z()),Jn=l.Z.div(m()),Qn=l.Z.div(g()),Yn=l.Z.img(x()),Xn=l.Z.div(v()),Fn=l.Z.img(h()),Gn=l.Z.div(f()),Kn=l.Z.div(p()),Vn=l.Z.div(d()),ne=t(246),ee=t.n(ne);function te(n){var e,t;return(0,r.jsxs)(sn,{children:[(0,r.jsxs)(un,{children:[(0,r.jsx)(an,{children:"\ubca0\uc2a4\ud2b8\uc0c1\ud488"}),(0,r.jsx)(cn,{children:null===(e=n.dataBestUsedItems)||void 0===e?void 0:e.fetchUseditemsOfTheBest.map((function(e){var t;return(0,r.jsxs)(ln,{onClick:n.onClickMoveDetail(e),children:[(0,r.jsx)(dn,{src:"https://storage.googleapis.com/".concat(null===(t=e.images)||void 0===t?void 0:t[0])}),(0,r.jsxs)(pn,{children:[(0,r.jsxs)(fn,{children:[(0,r.jsx)(vn,{children:e.name}),(0,r.jsx)(xn,{children:e.remarks}),(0,r.jsx)(mn,{children:e.price})]}),(0,r.jsxs)(hn,{children:[(0,r.jsx)(gn,{src:"/Picked.jpg"}),(0,r.jsx)(Zn,{children:e.pickedCount})]})]})]},e._id)}))}),(0,r.jsxs)(wn,{children:[(0,r.jsxs)(bn,{children:[(0,r.jsxs)(yn,{children:[(0,r.jsx)(jn,{onClick:n.onClickSwitch(!1),children:"\ud310\ub9e4\uc911\uc0c1\ud488"}),(0,r.jsx)(kn,{onClick:n.onClickSwitch(!0),children:"\ud310\ub9e4\ub41c\uc0c1\ud488"})]}),(0,r.jsxs)(Ln,{children:[(0,r.jsx)(Cn,{placeholder:"\uc81c\ud488\uc744 \uac80\uc0c9\ud574\uc8fc\uc138\uc694"}),(0,r.jsx)(Sn,{children:"2020.12.12~2020.12.13"}),(0,r.jsx)(Pn,{children:"\uac80\uc0c9"})]})]}),(0,r.jsx)("div",{style:{width:"100%",height:"1000px",overflow:"auto"},children:(0,r.jsx)(ee(),{pageStart:0,loadMore:n.onLoadMore,hasMore:n.hasMore,useWindow:!1,children:null===(t=n.data)||void 0===t?void 0:t.fetchUseditems.map((function(e){var t,i,o;return(0,r.jsxs)(Mn,{onClick:n.onClickMoveDetail(e),children:[null!==(t=e.images)&&void 0!==t&&t[0]?(0,r.jsx)(_n,{src:"https://storage.googleapis.com/".concat(null===(i=e.images)||void 0===i?void 0:i[0])}):(0,r.jsx)(_n,{src:"/market/login/102750939.1.jpg"}),(0,r.jsxs)(On,{children:[(0,r.jsxs)(En,{children:[(0,r.jsx)(Tn,{children:e.name}),(0,r.jsx)(Un,{children:e.remarks}),(0,r.jsx)(zn,{children:e.tags}),(0,r.jsxs)(Nn,{children:[(0,r.jsx)(Wn,{src:"/market/login/\ub300\ud45c\uc774\ubbf8\uc9c0.png"}),(0,r.jsx)(Rn,{children:null===(o=e.seller)||void 0===o?void 0:o.name}),(0,r.jsx)(Hn,{src:"/Picked.jpg"}),(0,r.jsx)(In,{children:e.pickedCount})]})]}),(0,r.jsxs)(Bn,{children:[e.price," \uc6d0"]})]})]})}))})})]}),(0,r.jsx)(Dn,{children:(0,r.jsx)($n,{onClick:n.onClickMovetoCreate,children:"\uc0c1\ud488\ub4f1\ub85d\ud558\uae30"})})]}),(0,r.jsxs)(qn,{children:[(0,r.jsx)(An,{children:"\uc624\ub298\ubcf8\uc0c1\ud488"}),n.accessToken?n.getLocal.map((function(n){var e,t;return(0,r.jsxs)(Jn,{children:[(0,r.jsxs)(Qn,{children:[(0,r.jsx)(Yn,{src:"/Picked.jpg"}),(0,r.jsx)(Xn,{children:n.pickedCount})]}),null!==(e=n.images)&&void 0!==e&&e[0]?(0,r.jsx)(Fn,{src:"https://storage.googleapis.com/".concat(null===(t=n.images)||void 0===t?void 0:t[0])}):(0,r.jsx)(Fn,{src:"/market/login/102750939.1.jpg"}),(0,r.jsx)(Gn,{children:n.remarks}),(0,r.jsx)(Kn,{children:n.price}),(0,r.jsx)(Vn,{children:n.tags})]},n._id)})):(0,r.jsx)(r.Fragment,{})]})]})}var re=t(22527);function ie(){var n=(0,c.Z)(["\n  query fetchUseditems($search: String, $page: Int, $isSoldout: Boolean) {\n    fetchUseditems(search: $search, page: $page, isSoldout: $isSoldout) {\n      _id\n      name\n      remarks\n      price\n      tags\n      images\n      pickedCount\n      seller {\n        name\n        picture\n      }\n    }\n  }\n"]);return ie=function(){return n},n}function oe(){var n=(0,c.Z)(["\n  query fetchUseditemsOfTheBest {\n    fetchUseditemsOfTheBest {\n      _id\n      name\n      remarks\n      tags\n      images\n      pickedCount\n      price\n    }\n  }\n"]);return oe=function(){return n},n}var se=(0,re.ZP)(oe()),ue=(0,re.ZP)(ie());function ae(){var n=(0,o.useQuery)(ue,{variables:{isSoldout:!1}}),e=n.data,t=n.fetchMore,c=n.refetch,l=(0,u.useState)(!0),d=l[0],p=l[1],f=(0,o.useQuery)(se).data,h=(0,u.useState)([" "]),v=h[0],x=h[1],g=(0,s.useRouter)(),m=(0,u.useContext)(a.GlobalContext).accessToken;(0,u.useEffect)((function(){var n=JSON.parse(localStorage.getItem("baskets")||"[]");x(n)}),[]);var Z=function(n){var e=[n],t=JSON.parse(localStorage.getItem("baskets")||"[]").filter((function(e,t){return t<4&&e._id!==n._id}));localStorage.setItem("baskets",JSON.stringify(e.concat(t)))};return(0,r.jsx)(te,{data:e,dataBestUsedItems:f,onClickMoveDetail:function(n){return function(){Z(n),g.push("/market/".concat(n._id))}},onClickMovetoCreate:function(){g.push("/market/new")},onClickBasket:Z,getLocal:v,hasMore:d,onLoadMore:function(){e&&t({variables:{page:Math.floor((null===e||void 0===e?void 0:e.fetchUseditems.length)/10+1)},updateQuery:function(n,e){var t=e.fetchMoreResult;return t.fetchUseditems.length||p(!1),{fetchUseditems:[].concat((0,i.Z)(n.fetchUseditems),(0,i.Z)(t.fetchUseditems))}}})},accessToken:m,onClickSwitch:function(n){return function(){c({isSoldout:n})}}})}function ce(){return(0,r.jsx)(ae,{})}},54883:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/market",function(){return t(39074)}])},59999:function(n,e,t){"use strict";t.d(e,{Z:function(){return o}});var r=t(75093);var i=t(40355);function o(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||(0,i.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},57761:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=t(67294),o=u(i),s=u(t(45697));function u(n){return n&&n.__esModule?n:{default:n}}var a=function(n){function e(n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?n:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return t.scrollListener=t.scrollListener.bind(t),t.eventListenerOptions=t.eventListenerOptions.bind(t),t.mousewheelListener=t.mousewheelListener.bind(t),t}return function(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,n),r(e,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var n=this.getParentElement(this.scrollComponent);n.scrollTop=n.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var n=!1,e={get passive(){n=!0}};try{document.addEventListener("test",null,e),document.removeEventListener("test",null,e)}catch(t){}return n}},{key:"eventListenerOptions",value:function(){var n=this.props.useCapture;return this.isPassiveSupported()&&(n={useCapture:this.props.useCapture,passive:!0}),n}},{key:"setDefaultLoader",value:function(n){this.defaultLoader=n}},{key:"detachMousewheelListener",value:function(){var n=window;!1===this.props.useWindow&&(n=this.scrollComponent.parentNode),n.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var n=window;!1===this.props.useWindow&&(n=this.getParentElement(this.scrollComponent)),n.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),n.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(n){var e=this.props.getScrollParent&&this.props.getScrollParent();return null!=e?e:n&&n.parentNode}},{key:"filterProps",value:function(n){return n}},{key:"attachScrollListener",value:function(){var n=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&n){var e=window;!1===this.props.useWindow&&(e=n),e.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),e.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(n){1!==n.deltaY||this.isPassiveSupported()||n.preventDefault()}},{key:"scrollListener",value:function(){var n=this.scrollComponent,e=window,t=this.getParentElement(n),r=void 0;if(this.props.useWindow){var i=document.documentElement||document.body.parentNode||document.body,o=void 0!==e.pageYOffset?e.pageYOffset:i.scrollTop;r=this.props.isReverse?o:this.calculateOffset(n,o)}else r=this.props.isReverse?t.scrollTop:n.scrollHeight-t.scrollTop-t.clientHeight;r<Number(this.props.threshold)&&n&&null!==n.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=t.scrollHeight,this.beforeScrollTop=t.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(n,e){return n?this.calculateTopPosition(n)+(n.offsetHeight-e-window.innerHeight):0}},{key:"calculateTopPosition",value:function(n){return n?n.offsetTop+this.calculateTopPosition(n.offsetParent):0}},{key:"render",value:function(){var n=this,e=this.filterProps(this.props),t=e.children,r=e.element,i=e.hasMore,s=(e.initialLoad,e.isReverse),u=e.loader,a=(e.loadMore,e.pageStart,e.ref),c=(e.threshold,e.useCapture,e.useWindow,e.getScrollParent,function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}(e,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(e){n.scrollComponent=e,a&&a(e)};var l=[t];return i&&(u?s?l.unshift(u):l.push(u):this.defaultLoader&&(s?l.unshift(this.defaultLoader):l.push(this.defaultLoader))),o.default.createElement(r,c,l)}}]),e}(i.Component);a.propTypes={children:s.default.node.isRequired,element:s.default.node,hasMore:s.default.bool,initialLoad:s.default.bool,isReverse:s.default.bool,loader:s.default.node,loadMore:s.default.func.isRequired,pageStart:s.default.number,ref:s.default.func,getScrollParent:s.default.func,threshold:s.default.number,useCapture:s.default.bool,useWindow:s.default.bool},a.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},e.default=a,n.exports=e.default},246:function(n,e,t){n.exports=t(57761)}},function(n){n.O(0,[774,888,179],(function(){return e=54883,n(n.s=e);var e}));var e=n.O();_N_E=e}]);